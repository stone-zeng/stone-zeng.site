@layer components {
  .prose {
    hyphens: auto;

    p,
    ul,
    ol,
    pre,
    blockquote,
    figure {
      @apply my-4;
    }

    table,
    pre,
    figcaption {
      @apply text-sm;
    }

    table,
    pre {
      @apply overflow-x-auto;
    }

    /* Headings */

    h2 {
      @apply mb-4 border-b border-light-800 pb-2 text-xl font-bold dark:border-dark-50;

      &:not(:first-of-type) {
        @apply mt-12;
      }
    }

    h3 {
      @apply mb-4 text-lg font-bold;

      &:not(:first-of-type) {
        @apply mt-8;
      }
    }

    h4 {
      @apply my-4 font-bold;
    }

    h2 + h3,
    h3 + h4 {
      @apply mt-0;
    }

    .header-anchor {
      @apply invisible opacity-0 transition-opacity;
    }

    h2,
    h3,
    h4 {
      &:hover > .header-anchor {
        @apply visible opacity-100;
      }
    }

    /* Lists */

    ul,
    ol {
      @apply pl-8;
    }

    ul {
      @apply list-disc;
    }

    ol {
      @apply list-decimal;
    }

    li {
      > ul {
        @apply list-[circle];

        > li > ul {
          @apply list-[square];
        }
      }

      > ol {
        @apply list-[lower-alpha];

        > li > ul {
          @apply list-[square];
        }
      }

      p,
      ul,
      ol,
      pre {
        @apply my-2;
      }

      > p,
      > [class^='language'] {
        &:last-child {
          @apply mb-4;
        }
      }
    }

    /* Quotes */

    blockquote {
      @apply border-l-4 border-light-800 pl-3 dark:border-dark-50;

      ul,
      ol {
        @apply pl-4;
      }

      > :not([class^='language']) {
        @apply text-neutral-500 dark:text-neutral-400;
      }
    }

    /* Codes */

    pre,
    code,
    kbd {
      @apply font-mono;
    }

    [class^='language'] {
      @apply relative;

      .copy {
        @apply hidden;
      }

      .lang {
        @apply absolute right-2 top-0.5 text-xs text-neutral-400 dark:text-neutral-500;
      }

      pre {
        @apply rounded bg-light-500 py-4 dark:bg-dark-300;

        code {
          @apply block w-fit px-4;
        }
      }
    }

    :not(pre) > code,
    kbd {
      @apply rounded bg-light-500 px-1 dark:bg-dark-300;
    }

    :not(pre) > code {
      @apply py-px text-sm;
    }

    kbd {
      @apply border-[1.5px] border-light-800 pb-0 pt-[1.5px] text-xs dark:border-dark-50;
    }

    .cjk-code {
      @apply px-[0.1em];
    }

    .cjk-kern {
      @apply tracking-[0.5em];
    }

    /* Figures */

    img {
      @apply mx-auto max-w-full border border-light-800 dark:border-dark-50;
    }

    figcaption {
      @apply mt-2 text-center;
    }

    /* Tables */

    table {
      @apply mx-auto block max-w-fit border-collapse whitespace-pre;
    }

    td,
    th {
      @apply border border-light-800 px-4 py-2 dark:border-dark-50;
    }

    /* Links */

    a {
      @apply text-blue-500;

      &:hover {
        @apply underline;
      }
    }

    /* TODO: */

    .invert {
      filter: none;
    }
  }
}
